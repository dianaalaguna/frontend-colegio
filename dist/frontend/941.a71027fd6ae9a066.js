"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[941],{6941:(P,l,n)=>{n.r(l),n.d(l,{AsignarProfesorComponent:()=>p});var d=n(177),i=n(4341),e=n(4438),f=n(6126),u=n(9885);function _(t,a){if(1&t&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&t){const r=a.$implicit;e.Y8G("value",r._id),e.R7$(),e.Lme(" ",r.nombres," ",r.apellidos," ")}}function g(t,a){if(1&t){const r=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"select",7),e.mxI("ngModelChange",function(s){const c=e.eBV(r).$implicit;return e.DH7(c.selectedProfesorId,s)||(c.selectedProfesorId=s),e.Njj(s)}),e.j41(9,"option",8),e.EFF(10,"Profesor"),e.k0s(),e.DNE(11,_,2,3,"option",9),e.k0s()(),e.j41(12,"td")(13,"button",10),e.bIt("click",function(){const s=e.eBV(r).$implicit,c=e.XpG();return e.Njj(c.asignarProfesor(s))}),e.EFF(14,"Asignar"),e.k0s()()()}if(2&t){const r=a.$implicit,o=e.XpG();e.R7$(2),e.JRh(r.nombre),e.R7$(2),e.JRh(r.grado),e.R7$(2),e.JRh(r.periodo),e.R7$(2),e.R50("ngModel",r.selectedProfesorId),e.BMQ("key",r._id),e.R7$(3),e.Y8G("ngForOf",o.profesores)}}let p=(()=>{class t{constructor(r,o,s){this.subjectService=r,this.userService=o,this.cdr=s,this.subjects=[],this.profesores=[],this.selectedProfesorId=null,this.selectedSubjectId=null}ngOnInit(){this.userService.getProfesores().subscribe(r=>{this.profesores=r,this.loadSubjects()})}loadSubjects(){this.subjectService.getSubjectsWithoutProfessors().subscribe(r=>{this.subjects=r.map(o=>{let s="";return o.profesores&&o.profesores.length>0&&(s=String(o.profesores[0])),{...o,selectedProfesorId:s}})})}loadProfesores(){this.userService.getProfesores().subscribe(r=>{console.log("Profesores:",r),this.profesores=r})}asignarProfesor(r){const o=r.selectedProfesorId;o?this.subjectService.asociarProfesor(r._id,o).subscribe({next:s=>{alert("Profesor asignado correctamente"),this.loadSubjects()},error:s=>{alert(s.error.message||"Error al asignar profesor"),console.error(s)}}):alert("Por favor selecciona un profesor")}trackBySubjectId(r,o){return o._id}static{this.\u0275fac=function(o){return new(o||t)(e.rXU(f.M),e.rXU(u.D),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-asignar-profesor"]],standalone:!0,features:[e.aNF],decls:22,vars:2,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"row"],[1,"col-md-12"],[1,"table","table-bordered","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-success","mt-3",3,"click"],[3,"value"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"\u{1f4da} Asignar Profesor a Materia"),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"h4"),e.EFF(6,"Materias"),e.k0s(),e.j41(7,"table",4)(8,"thead",5)(9,"tr")(10,"th"),e.EFF(11,"Nombre"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Grado"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Periodo"),e.k0s(),e.j41(16,"th"),e.EFF(17,"Profesores"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Acci\xf3n"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,g,15,6,"tr",6),e.k0s()()()()()),2&o&&(e.R7$(21),e.Y8G("ngForOf",s.subjects)("ngForTrackBy",s.trackBySubjectId))},dependencies:[d.MD,d.Sq,i.YN,i.xH,i.y7,i.wz,i.BC,i.vS],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}select.form-control[_ngcontent-%COMP%]{appearance:auto;-webkit-appearance:auto;-moz-appearance:auto}"]})}}return t})()}}]);
import{a as B}from"./chunk-2SRB5VGG.js";import{a as k,b as A,c as z,d as G,e as H,f as J,h as K,i as Q,j as X,k as Y,l as Z,m as $,n as ee}from"./chunk-KCB7IB6P.js";import{d as O}from"./chunk-A7GR7GC6.js";import{a as q,f as P}from"./chunk-K7YZQKDG.js";import{$a as v,Bb as W,Cb as N,Db as L,Eb as j,Ia as u,Ka as l,Ma as r,Na as t,O as D,Pa as R,Qa as F,Ra as I,T,Va as c,Wa as s,Ya as V,Z as x,ab as y,bb as h,db as U,eb as C,ga as f,ha as _,va as a,wa as E}from"./chunk-ZTNMYY3J.js";var te=(()=>{class e{constructor(i){this.http=i,this.baseUrl=`${P.apiUrl}/userType`}getUserTypes(){return this.http.get(this.baseUrl)}static{this.\u0275fac=function(g){return new(g||e)(T(q))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var b=e=>({"is-invalid":e});function re(e,m){e&1&&(r(0,"div"),s(1,"El correo es obligatorio."),t())}function oe(e,m){e&1&&(r(0,"div"),s(1,"Formato de correo inv\xE1lido."),t())}function ae(e,m){if(e&1&&(r(0,"div",29),u(1,re,2,0,"div",30)(2,oe,2,0,"div",30),t()),e&2){I();let i=c(11);a(),l("ngIf",i.errors==null?null:i.errors.required),a(),l("ngIf",i.errors==null?null:i.errors.email)}}function le(e,m){e&1&&(r(0,"div"),s(1,"La contrase\xF1a es obligatoria."),t())}function se(e,m){e&1&&(r(0,"div"),s(1," La contrase\xF1a debe tener al menos 6 caracteres. "),t())}function de(e,m){if(e&1&&(r(0,"div",29),u(1,le,2,0,"div",30)(2,se,2,0,"div",30),t()),e&2){I();let i=c(17);a(),l("ngIf",i.errors==null?null:i.errors.required),a(),l("ngIf",i.errors==null?null:i.errors.minlength)}}function me(e,m){e&1&&(r(0,"div",29),s(1," El nombre es obligatorio. "),t())}function pe(e,m){e&1&&(r(0,"div",29),s(1," El apellido es obligatorio. "),t())}function ue(e,m){if(e&1&&(r(0,"option",31),s(1),t()),e&2){let i=m.$implicit;l("value",i._id),a(),V(" ",i.type," ")}}function ce(e,m){e&1&&(r(0,"div",29),s(1," Seleccione un tipo de usuario. "),t())}var Se=(()=>{class e{constructor(i,g,o){this.userTypeService=i,this.authService=g,this.router=o,this.userTypes=[],this.formData={username:"",password:"",nombres:"",apellidos:"",telefono:"",tipoUsuario:null}}ngOnInit(){this.userTypeService.getUserTypes().subscribe({next:i=>{this.userTypes=i,i.length>0&&(this.formData.tipoUsuario=i[0]._id)},error:i=>{console.error("Error al cargar tipos de usuario:",i)}})}onSubmit(){this.authService.register(this.formData).subscribe({next:i=>{alert("Usuario registrado con \xE9xito"),this.router.navigate(["/login"])},error:i=>{console.error("Error al registrar usuario:",i),alert("Error al registrar. Verifica los datos.")}})}static{this.\u0275fac=function(g){return new(g||e)(E(te),E(B),E(O))}}static{this.\u0275cmp=x({type:e,selectors:[["app-register"]],standalone:!0,features:[U],decls:47,vars:28,consts:[["registroForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],["nombresInput","ngModel"],["apellidosInput","ngModel"],["telefonoInput","ngModel"],["tipoUsuarioInput","ngModel"],[1,"container","mt-5",2,"max-width","500px"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","email","id","username","name","username","required","","email","","placeholder","ejemplo@correo.com",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","minlength","6","placeholder","********",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","nombres",1,"form-label"],["type","text","id","nombres","name","nombres","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","apellidos",1,"form-label"],["type","text","id","apellidos","name","apellidos","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","telefono",1,"form-label"],["type","text","id","telefono","name","telefono","placeholder","Ej: 3001234567",1,"form-control",3,"ngModelChange","ngModel"],["for","tipoUsuario",1,"form-label"],["id","tipoUsuario","name","tipoUsuario","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(g,o){if(g&1){let p=R();r(0,"div",7)(1,"div",8)(2,"div",9)(3,"h3",10),s(4,"\u{1F4DD} Registro de Usuario"),t(),r(5,"form",11,0),F("ngSubmit",function(){return f(p),_(o.onSubmit())}),r(7,"div",12)(8,"label",13),s(9,"Correo electr\xF3nico"),t(),r(10,"input",14,1),h("ngModelChange",function(n){return f(p),y(o.formData.username,n)||(o.formData.username=n),_(n)}),t(),u(12,ae,3,2,"div",15),t(),r(13,"div",12)(14,"label",16),s(15,"Contrase\xF1a"),t(),r(16,"input",17,2),h("ngModelChange",function(n){return f(p),y(o.formData.password,n)||(o.formData.password=n),_(n)}),t(),u(18,de,3,2,"div",15),t(),r(19,"div",12)(20,"label",18),s(21,"Nombres"),t(),r(22,"input",19,3),h("ngModelChange",function(n){return f(p),y(o.formData.nombres,n)||(o.formData.nombres=n),_(n)}),t(),u(24,me,2,0,"div",15),t(),r(25,"div",12)(26,"label",20),s(27,"Apellidos"),t(),r(28,"input",21,4),h("ngModelChange",function(n){return f(p),y(o.formData.apellidos,n)||(o.formData.apellidos=n),_(n)}),t(),u(30,pe,2,0,"div",15),t(),r(31,"div",12)(32,"label",22),s(33,"Tel\xE9fono"),t(),r(34,"input",23,5),h("ngModelChange",function(n){return f(p),y(o.formData.telefono,n)||(o.formData.telefono=n),_(n)}),t()(),r(36,"div",12)(37,"label",24),s(38,"Tipo de Usuario"),t(),r(39,"select",25,6),h("ngModelChange",function(n){return f(p),y(o.formData.tipoUsuario,n)||(o.formData.tipoUsuario=n),_(n)}),r(41,"option",26),s(42,"Seleccione un tipo"),t(),u(43,ue,2,2,"option",27),t(),u(44,ce,2,0,"div",15),t(),r(45,"button",28),s(46," Registrarse "),t()()()()()}if(g&2){let p=c(6),d=c(11),n=c(17),S=c(23),w=c(29),M=c(40);a(10),v("ngModel",o.formData.username),l("ngClass",C(18,b,d.invalid&&d.touched)),a(2),l("ngIf",d.invalid&&d.touched),a(4),v("ngModel",o.formData.password),l("ngClass",C(20,b,n.invalid&&n.touched)),a(2),l("ngIf",n.invalid&&n.touched),a(4),v("ngModel",o.formData.nombres),l("ngClass",C(22,b,S.invalid&&S.touched)),a(2),l("ngIf",S.invalid&&S.touched),a(4),v("ngModel",o.formData.apellidos),l("ngClass",C(24,b,w.invalid&&w.touched)),a(2),l("ngIf",w.invalid&&w.touched),a(4),v("ngModel",o.formData.telefono),a(5),v("ngModel",o.formData.tipoUsuario),l("ngClass",C(26,b,M.invalid&&M.touched)),a(4),l("ngForOf",o.userTypes),a(),l("ngIf",M.invalid&&M.touched),a(),l("disabled",p.invalid)}},dependencies:[j,W,N,L,ee,J,Q,X,k,K,A,z,Y,$,Z,H,G],styles:["select.form-control[_ngcontent-%COMP%]{appearance:auto;-webkit-appearance:auto;-moz-appearance:auto}"]})}}return e})();export{Se as RegisterComponent};

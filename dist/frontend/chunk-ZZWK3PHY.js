import{a as w}from"./chunk-YXKEXZIP.js";import{b as I,e as y,h as F}from"./chunk-A7GR7GC6.js";import"./chunk-K7YZQKDG.js";import{Cb as h,Db as D,Eb as C,Ia as d,Ka as m,Ma as i,Na as t,Pa as v,Qa as x,Ra as p,Va as E,Wa as n,Xa as l,Z as S,db as g,ga as b,gb as j,ha as f,va as o,wa as _}from"./chunk-ZTNMYY3J.js";function T(r,c){if(r&1){let e=v();i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td")(8,"button",12),x("click",function(){let a=b(e).$implicit,u=p(2);return f(u.desvincularProfesor(a._id))}),n(9," Desvincular "),t()()()}if(r&2){let e=c.$implicit;o(2),l(e.nombres),o(2),l(e.apellidos),o(2),l(e.username)}}function k(r,c){r&1&&(i(0,"div",13),n(1," No hay profesores asignados a esta materia. "),t())}function V(r,c){if(r&1){let e=v();i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td")(8,"button",12),x("click",function(){let a=b(e).$implicit,u=p(2);return f(u.desvincularEstudiante(a._id))}),n(9," Desvincular "),t()()()}if(r&2){let e=c.$implicit;o(2),l(e.codigoEstudiante),o(2),l(e.nombres),o(2),l(e.apellidos)}}function N(r,c){r&1&&(i(0,"div",13),n(1," No hay estudiantes asignados a esta materia. "),t())}function A(r,c){if(r&1&&(i(0,"div",2)(1,"div",3)(2,"h2",4),n(3),t(),i(4,"p",5),n(5," Grado: "),i(6,"strong"),n(7),t(),n(8," | Periodo: "),i(9,"strong"),n(10),t()(),i(11,"a",6),n(12,"\u2190 Volver al listado"),t()(),i(13,"div",3)(14,"h4"),n(15,"\u{1F468}\u200D\u{1F3EB} Profesor/es asignado/s"),t(),i(16,"table",7)(17,"thead",8)(18,"tr")(19,"th"),n(20,"Nombres"),t(),i(21,"th"),n(22,"Apellidos"),t(),i(23,"th"),n(24,"Usuario"),t(),i(25,"th"),n(26,"Acciones"),t()()(),i(27,"tbody"),d(28,T,10,3,"tr",9),t()(),d(29,k,2,0,"div",10),t(),i(30,"div")(31,"h4",11),n(32,"\u{1F468}\u200D\u{1F393} Estudiantes"),t(),i(33,"table",7)(34,"thead",8)(35,"tr")(36,"th"),n(37,"C\xF3digo"),t(),i(38,"th"),n(39,"Nombres"),t(),i(40,"th"),n(41,"Apellidos"),t(),i(42,"th"),n(43,"Acciones"),t()()(),i(44,"tbody"),d(45,V,10,3,"tr",9),t()(),d(46,N,2,0,"div",10),t()()),r&2){let e=p();o(3),l(e.subject.nombre),o(4),l(e.subject.grado),o(3),l(e.subject.periodo),o(18),m("ngForOf",e.subject.profesores),o(),m("ngIf",e.subject.profesores.length===0),o(16),m("ngForOf",e.subject.estudiantes),o(),m("ngIf",e.subject.estudiantes.length===0)}}function M(r,c){r&1&&(i(0,"div",2)(1,"div",14),n(2," Cargando datos de la materia... "),t()())}var G=(()=>{class r{constructor(e,s){this.route=e,this.subjectService=s,this.subject=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.subjectService.getSubjectById(e).subscribe(s=>{this.subject=s})}desvincularEstudiante(e){!this.subject?._id||!confirm("\xBFEst\xE1s seguro de desvincular al estudiante?")||this.subjectService.removeEstudianteFromSubject(this.subject._id,e).subscribe({next:()=>{this.subject.estudiantes=this.subject.estudiantes.filter(a=>a._id!==e)},error:a=>{console.error("Error al desvincular estudiante:",a),alert("Error al desvincular estudiante")}})}desvincularProfesor(e){!this.subject?._id||!confirm("\xBFEst\xE1s seguro de desvincular al profesor?")||this.subjectService.removeProfesorFromSubject(this.subject._id,e).subscribe({next:()=>{this.subject.profesores=this.subject.profesores.filter(a=>a._id!==e)},error:a=>{console.error("Error al desvincular profesor:",a),alert("Error al desvincular profesor")}})}static{this.\u0275fac=function(s){return new(s||r)(_(I),_(w))}}static{this.\u0275cmp=S({type:r,selectors:[["app-subject-detail"]],standalone:!0,features:[g],decls:3,vars:2,consts:[["loading",""],["class","container mt-4",4,"ngIf","ngIfElse"],[1,"container","mt-4"],[1,"mb-4"],[1,"mb-1"],[1,"text-muted"],["routerLink","/subject-list",1,"btn","btn-outline-secondary","btn-sm"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","alert alert-warning text-center",4,"ngIf"],[1,"mb-3"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"alert","alert-warning","text-center"],[1,"alert","alert-info","text-center"]],template:function(s,a){if(s&1&&d(0,A,47,7,"div",1)(1,M,3,0,"ng-template",null,0,j),s&2){let u=E(2);m("ngIf",a.subject)("ngIfElse",u)}},dependencies:[C,h,D,F,y],encapsulation:2})}}return r})();export{G as SubjectDetailComponent};

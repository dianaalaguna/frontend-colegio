"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[629],{9629:(p,l,o)=>{o.r(l),o.d(l,{SubjectDetailComponent:()=>E});var a=o(177),u=o(1069),t=o(4438),d=o(6126);function _(s,r){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"button",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.desvincularProfesor(n._id))}),t.EFF(9," Desvincular "),t.k0s()()()}if(2&s){const e=r.$implicit;t.R7$(2),t.JRh(e.nombres),t.R7$(2),t.JRh(e.apellidos),t.R7$(2),t.JRh(e.username)}}function b(s,r){1&s&&(t.j41(0,"div",13),t.EFF(1," No hay profesores asignados a esta materia. "),t.k0s())}function j(s,r){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"button",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.desvincularEstudiante(n._id))}),t.EFF(9," Desvincular "),t.k0s()()()}if(2&s){const e=r.$implicit;t.R7$(2),t.JRh(e.codigoEstudiante),t.R7$(2),t.JRh(e.nombres),t.R7$(2),t.JRh(e.apellidos)}}function F(s,r){1&s&&(t.j41(0,"div",13),t.EFF(1," No hay estudiantes asignados a esta materia. "),t.k0s())}function f(s,r){if(1&s&&(t.j41(0,"div",2)(1,"div",3)(2,"h2",4),t.EFF(3),t.k0s(),t.j41(4,"p",5),t.EFF(5," Grado: "),t.j41(6,"strong"),t.EFF(7),t.k0s(),t.EFF(8," | Periodo: "),t.j41(9,"strong"),t.EFF(10),t.k0s()(),t.j41(11,"a",6),t.EFF(12,"\u2190 Volver al listado"),t.k0s()(),t.j41(13,"div",3)(14,"h4"),t.EFF(15,"\u{1f468}\u200d\u{1f3eb} Profesor/es asignado/s"),t.k0s(),t.j41(16,"table",7)(17,"thead",8)(18,"tr")(19,"th"),t.EFF(20,"Nombres"),t.k0s(),t.j41(21,"th"),t.EFF(22,"Apellidos"),t.k0s(),t.j41(23,"th"),t.EFF(24,"Usuario"),t.k0s(),t.j41(25,"th"),t.EFF(26,"Acciones"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,_,10,3,"tr",9),t.k0s()(),t.DNE(29,b,2,0,"div",10),t.k0s(),t.j41(30,"div")(31,"h4",11),t.EFF(32,"\u{1f468}\u200d\u{1f393} Estudiantes"),t.k0s(),t.j41(33,"table",7)(34,"thead",8)(35,"tr")(36,"th"),t.EFF(37,"C\xf3digo"),t.k0s(),t.j41(38,"th"),t.EFF(39,"Nombres"),t.k0s(),t.j41(40,"th"),t.EFF(41,"Apellidos"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Acciones"),t.k0s()()(),t.j41(44,"tbody"),t.DNE(45,j,10,3,"tr",9),t.k0s()(),t.DNE(46,F,2,0,"div",10),t.k0s()()),2&s){const e=t.XpG();t.R7$(3),t.JRh(e.subject.nombre),t.R7$(4),t.JRh(e.subject.grado),t.R7$(3),t.JRh(e.subject.periodo),t.R7$(18),t.Y8G("ngForOf",e.subject.profesores),t.R7$(),t.Y8G("ngIf",0===e.subject.profesores.length),t.R7$(16),t.Y8G("ngForOf",e.subject.estudiantes),t.R7$(),t.Y8G("ngIf",0===e.subject.estudiantes.length)}}function m(s,r){1&s&&(t.j41(0,"div",2)(1,"div",14),t.EFF(2," Cargando datos de la materia... "),t.k0s()())}let E=(()=>{class s{constructor(e,i){this.route=e,this.subjectService=i,this.subject=null}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&this.subjectService.getSubjectById(e).subscribe(i=>{this.subject=i})}desvincularEstudiante(e){!this.subject?._id||!confirm("\xbfEst\xe1s seguro de desvincular al estudiante?")||this.subjectService.removeEstudianteFromSubject(this.subject._id,e).subscribe({next:()=>{this.subject.estudiantes=this.subject.estudiantes.filter(n=>n._id!==e)},error:n=>{console.error("Error al desvincular estudiante:",n),alert("Error al desvincular estudiante")}})}desvincularProfesor(e){!this.subject?._id||!confirm("\xbfEst\xe1s seguro de desvincular al profesor?")||this.subjectService.removeProfesorFromSubject(this.subject._id,e).subscribe({next:()=>{this.subject.profesores=this.subject.profesores.filter(n=>n._id!==e)},error:n=>{console.error("Error al desvincular profesor:",n),alert("Error al desvincular profesor")}})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(u.nX),t.rXU(d.M))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-subject-detail"]],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["loading",""],["class","container mt-4",4,"ngIf","ngIfElse"],[1,"container","mt-4"],[1,"mb-4"],[1,"mb-1"],[1,"text-muted"],["routerLink","/subject-list",1,"btn","btn-outline-secondary","btn-sm"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","alert alert-warning text-center",4,"ngIf"],[1,"mb-3"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"alert","alert-warning","text-center"],[1,"alert","alert-info","text-center"]],template:function(i,n){if(1&i&&t.DNE(0,f,47,7,"div",1)(1,m,3,0,"ng-template",null,0,t.C5r),2&i){const c=t.sdS(2);t.Y8G("ngIf",n.subject)("ngIfElse",c)}},dependencies:[a.MD,a.Sq,a.bT,u.iI,u.Wk],encapsulation:2})}}return s})()}}]);
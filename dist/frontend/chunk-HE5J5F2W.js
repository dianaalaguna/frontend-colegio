import{a as y}from"./chunk-YXKEXZIP.js";import{e as L,h as I}from"./chunk-A7GR7GC6.js";import"./chunk-K7YZQKDG.js";import{Cb as h,Db as E,Eb as C,Ia as m,Ka as c,Ma as n,Na as i,Pa as _,Qa as v,Ra as d,Wa as r,Xa as u,Ya as p,Z as f,db as g,eb as b,ga as S,ha as j,va as a,wa as x}from"./chunk-ZTNMYY3J.js";var k=t=>["/subject-detail",t],D=t=>["/subject-update",t];function F(t,l){if(t&1){let e=_();n(0,"tr")(1,"td")(2,"a",7),r(3),i()(),n(4,"td"),r(5),i(),n(6,"td"),r(7),i(),n(8,"td")(9,"a",8),r(10," Editar "),i(),n(11,"button",9),v("click",function(){let o=S(e).$implicit,M=d();return j(M.deleteSubject(o._id))}),r(12," Eliminar "),i()()()}if(t&2){let e=l.$implicit;a(2),c("routerLink",b(5,k,e._id)),a(),p(" ",e.nombre," "),a(2),u(e.grado),a(2),u(e.periodo),a(2),c("routerLink",b(7,D,e._id))}}function w(t,l){t&1&&(n(0,"div",10),r(1," No hay materias registradas. "),i())}function T(t,l){if(t&1&&(n(0,"div",11),r(1),i()),t&2){let e=d();a(),p(" ",e.deleteMessage," ")}}var q=(()=>{class t{constructor(e){this.subjectService=e,this.subjects=[],this.deleteMessage=null}ngOnInit(){this.loadSubjects()}loadSubjects(){this.subjectService.getSubjectsWithUsers().subscribe(e=>{this.subjects=e})}deleteSubject(e){window.confirm("\xBFEst\xE1s seguro de que deseas eliminar esta materia?")&&this.subjectService.deleteSubject(e).subscribe({next:()=>{this.subjects=this.subjects.filter(o=>o._id!==e),this.deleteMessage="La materia ha sido eliminada correctamente.",setTimeout(()=>{this.deleteMessage=null},3e3)},error:o=>{console.error("Error al eliminar materia:",o),alert("Ocurri\xF3 un error al eliminar la materia.")}})}static{this.\u0275fac=function(s){return new(s||t)(x(y))}}static{this.\u0275cmp=f({type:t,selectors:[["app-subject-list"]],standalone:!0,features:[g],decls:18,vars:3,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"table","table-bordered","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],["class","alert alert-info text-center",4,"ngIf"],["class","alert alert-success mt-4",4,"ngIf"],[1,"text-decoration-none",3,"routerLink"],[1,"btn","btn-success","btn-sm","me-2",3,"routerLink"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"alert","alert-info","text-center"],[1,"alert","alert-success","mt-4"]],template:function(s,o){s&1&&(n(0,"div",0)(1,"h2",1),r(2,"\u{1F4DA} Materias"),i(),n(3,"table",2)(4,"thead",3)(5,"tr")(6,"th"),r(7,"Nombre"),i(),n(8,"th"),r(9,"Grado"),i(),n(10,"th"),r(11,"Periodo"),i(),n(12,"th"),r(13,"Acciones"),i()()(),n(14,"tbody"),m(15,F,13,9,"tr",4),i()(),m(16,w,2,0,"div",5)(17,T,2,1,"div",6),i()),s&2&&(a(15),c("ngForOf",o.subjects),a(),c("ngIf",o.subjects.length===0),a(),c("ngIf",o.deleteMessage))},dependencies:[C,h,E,I,L],encapsulation:2})}}return t})();export{q as SubjectListComponent};

"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[587],{7587:(p,o,i)=>{i.r(o),i.d(o,{AsignarEstudiantesComponent:()=>m});var r=i(177),c=i(4341),t=i(4438),l=i(1069),h=i(9169),g=i(6126);function E(a,u){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"input",7),t.bIt("change",function(n){const d=t.eBV(e).$implicit,f=t.XpG();return t.Njj(f.onCheckboxChange(n,d._id))}),t.k0s()(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s()()}if(2&a){const e=u.$implicit;t.R7$(4),t.JRh(e.nombres),t.R7$(2),t.JRh(e.apellidos),t.R7$(2),t.JRh(e.codigoEstudiante)}}function _(a,u){1&a&&(t.j41(0,"div",8),t.EFF(1," No hay estudiantes por asignar. "),t.k0s())}let m=(()=>{class a{constructor(e,s,n){this.route=e,this.studentService=s,this.subjectService=n,this.unassignedStudents=[],this.selectedStudentIds=new Set}ngOnInit(){this.subjectId=this.route.snapshot.paramMap.get("id"),this.loadUnassignedStudents()}loadUnassignedStudents(){this.studentService.getStudentsNotAssigned(this.subjectId).subscribe(e=>{this.unassignedStudents=e,console.log("Estudiantes: ",this.unassignedStudents)})}onCheckboxChange(e,s){e.target?.checked?this.selectedStudentIds.add(s):this.selectedStudentIds.delete(s)}asignarEstudiantes(){const e=Array.from(this.selectedStudentIds);0!==e.length?(e.forEach(s=>{this.subjectService.asociarEstudiante(this.subjectId,s).subscribe({next:()=>{console.log(`Estudiante ${s} asignado`),this.loadUnassignedStudents()},error:n=>{console.error(`Error al asignar estudiante ${s}`,n)}})}),this.selectedStudentIds.clear()):alert("Por favor selecciona al menos un estudiante.")}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(l.nX),t.rXU(h.b),t.rXU(g.M))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-asignar-estudiantes"]],standalone:!0,features:[t.aNF],decls:19,vars:2,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"table","table-bordered","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],["class","alert alert-info text-center",4,"ngIf"],[1,"btn","btn-primary","mt-3",3,"click"],["type","checkbox",3,"change"],[1,"alert","alert-info","text-center"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"\u{1f468}\u200d\u{1f393} Estudiantes no asignados a esta materia"),t.k0s(),t.j41(3,"table",2)(4,"thead",3)(5,"tr")(6,"th"),t.EFF(7,"Seleccionar"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Nombre"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Apellido"),t.k0s(),t.j41(12,"th"),t.EFF(13,"C\xf3digo"),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,E,9,3,"tr",4),t.k0s()(),t.DNE(16,_,2,0,"div",5),t.j41(17,"button",6),t.bIt("click",function(){return n.asignarEstudiantes()}),t.EFF(18,"Asignar seleccionados"),t.k0s()()),2&s&&(t.R7$(15),t.Y8G("ngForOf",n.unassignedStudents),t.R7$(),t.Y8G("ngIf",0===n.unassignedStudents.length))},dependencies:[r.MD,r.Sq,r.bT,c.YN]})}}return a})()}}]);
import{a as k}from"./chunk-GIHKOK6C.js";import{n as A}from"./chunk-KCB7IB6P.js";import{a as y}from"./chunk-YXKEXZIP.js";import{b as I}from"./chunk-A7GR7GC6.js";import"./chunk-K7YZQKDG.js";import{Cb as _,Db as x,Eb as C,Ia as u,Ka as m,Ma as n,Na as i,Pa as E,Qa as p,Ra as b,Wa as s,Xa as c,Z as h,db as v,ga as S,ha as f,va as o,wa as d}from"./chunk-ZTNMYY3J.js";function F(r,g){if(r&1){let e=E();n(0,"tr")(1,"td")(2,"input",7),p("change",function(a){let l=S(e).$implicit,j=b();return f(j.onCheckboxChange(a,l._id))}),i()(),n(3,"td"),s(4),i(),n(5,"td"),s(6),i(),n(7,"td"),s(8),i()()}if(r&2){let e=g.$implicit;o(4),c(e.nombres),o(2),c(e.apellidos),o(2),c(e.codigoEstudiante)}}function D(r,g){r&1&&(n(0,"div",8),s(1," No hay estudiantes por asignar. "),i())}var V=(()=>{class r{constructor(e,t,a){this.route=e,this.studentService=t,this.subjectService=a,this.unassignedStudents=[],this.selectedStudentIds=new Set}ngOnInit(){this.subjectId=this.route.snapshot.paramMap.get("id"),this.loadUnassignedStudents()}loadUnassignedStudents(){this.studentService.getStudentsNotAssigned(this.subjectId).subscribe(e=>{this.unassignedStudents=e,console.log("Estudiantes: ",this.unassignedStudents)})}onCheckboxChange(e,t){e.target?.checked??!1?this.selectedStudentIds.add(t):this.selectedStudentIds.delete(t)}asignarEstudiantes(){let e=Array.from(this.selectedStudentIds);if(e.length===0){alert("Por favor selecciona al menos un estudiante.");return}e.forEach(t=>{this.subjectService.asociarEstudiante(this.subjectId,t).subscribe({next:()=>{console.log(`Estudiante ${t} asignado`),this.loadUnassignedStudents()},error:a=>{console.error(`Error al asignar estudiante ${t}`,a)}})}),this.selectedStudentIds.clear()}static{this.\u0275fac=function(t){return new(t||r)(d(I),d(k),d(y))}}static{this.\u0275cmp=h({type:r,selectors:[["app-asignar-estudiantes"]],standalone:!0,features:[v],decls:19,vars:2,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"table","table-bordered","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],["class","alert alert-info text-center",4,"ngIf"],[1,"btn","btn-primary","mt-3",3,"click"],["type","checkbox",3,"change"],[1,"alert","alert-info","text-center"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h2",1),s(2,"\u{1F468}\u200D\u{1F393} Estudiantes no asignados a esta materia"),i(),n(3,"table",2)(4,"thead",3)(5,"tr")(6,"th"),s(7,"Seleccionar"),i(),n(8,"th"),s(9,"Nombre"),i(),n(10,"th"),s(11,"Apellido"),i(),n(12,"th"),s(13,"C\xF3digo"),i()()(),n(14,"tbody"),u(15,F,9,3,"tr",4),i()(),u(16,D,2,0,"div",5),n(17,"button",6),p("click",function(){return a.asignarEstudiantes()}),s(18,"Asignar seleccionados"),i()()),t&2&&(o(15),m("ngForOf",a.unassignedStudents),o(),m("ngIf",a.unassignedStudents.length===0))},dependencies:[C,_,x,A]})}}return r})();export{V as AsignarEstudiantesComponent};

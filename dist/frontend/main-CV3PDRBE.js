import{a as v}from"./chunk-2SRB5VGG.js";import{n as $}from"./chunk-KCB7IB6P.js";import{a as B,c as R,d as m,e as V,f as H,g as G,h as D}from"./chunk-A7GR7GC6.js";import{b as F,c as O,d as N}from"./chunk-K7YZQKDG.js";import{Db as j,Eb as U,Ia as g,Ka as u,Ma as r,Na as i,O as p,Oa as x,Pa as M,Qa as T,Ra as h,T as c,U as A,Wa as a,Z as C,_a as P,ba as y,d as k,db as b,ga as L,ha as E,va as s,wa as w}from"./chunk-ZTNMYY3J.js";function Q(e,d){e&1&&(r(0,"li",7)(1,"a",8),a(2,"\u{1F511} Login"),i()())}function X(e,d){e&1&&(r(0,"li",7)(1,"a",9),a(2,"\u{1F4DD} Registro"),i()())}function Y(e,d){e&1&&(r(0,"li",10)(1,"a",11),a(2," \u{1F465} Usuarios "),i()())}function Z(e,d){e&1&&(r(0,"a",17),a(1,"\u2795 Crear"),i())}function ee(e,d){e&1&&(r(0,"a",18),a(1,"\u{1F468}\u200D\u{1F3EB} Asignar Profesor"),i())}function te(e,d){e&1&&(r(0,"a",19),a(1,"\u{1F469}\u200D\u{1F393} Asignar Estudiante"),i())}function ne(e,d){if(e&1&&(r(0,"li",10)(1,"a",12),a(2," \u{1F4DA} Asignaturas "),i(),r(3,"ul",13)(4,"li"),g(5,Z,2,0,"a",14),i(),r(6,"li"),g(7,ee,2,0,"a",15),i(),r(8,"li"),g(9,te,2,0,"a",16),i()()()),e&2){let t=h();s(5),u("ngIf",(t.user==null||t.user.tipoUsuario==null?null:t.user.tipoUsuario.type)==="Coordinador"),s(2),u("ngIf",(t.user==null||t.user.tipoUsuario==null?null:t.user.tipoUsuario.type)==="Coordinador"),s(2),u("ngIf",(t.user==null||t.user.tipoUsuario==null?null:t.user.tipoUsuario.type)==="Coordinador")}}function oe(e,d){e&1&&(r(0,"li",10)(1,"a",20),a(2," \u{1F468}\u200D\u{1F393} Estudiantes "),i(),r(3,"ul",21)(4,"li")(5,"a",22),a(6,"\u2795 Crear"),i()(),r(7,"li")(8,"a",23),a(9,"\u270F\uFE0F Modificar"),i()()()())}function ie(e,d){e&1&&(r(0,"li",10)(1,"a",24),a(2," \u{1F441}\uFE0F Ver "),i(),r(3,"ul",25)(4,"li")(5,"a",26),a(6,"\u{1F4DA} Materias"),i()(),r(7,"li")(8,"a",27),a(9,"\u{1F468}\u200D\u{1F393} Estudiantes"),i()()()())}function re(e,d){e&1&&(r(0,"div")(1,"li",10)(2,"a",28),a(3," \u2139\uFE0F Acerca de "),i()()())}function ae(e,d){if(e&1){let t=M();r(0,"div")(1,"span",29),a(2),i(),r(3,"button",30),T("click",function(){L(t);let n=h();return E(n.logout())}),a(4,"Cerrar sesi\xF3n"),i()()}if(e&2){let t=h();s(2),P(" \u{1F464} ",t.user==null?null:t.user.nombres," ",t.user==null?null:t.user.apellidos," (",t.user==null||t.user.tipoUsuario==null?null:t.user.tipoUsuario.type,") ")}}var W=(()=>{class e{constructor(t,o){this.authService=t,this.router=o,this.user=null,this.userSubscription=new k}ngOnInit(){this.userSubscription=this.authService.user$.subscribe(t=>{this.user=t})}ngOnDestroy(){this.userSubscription.unsubscribe()}isLoggedIn(){return this.authService.isLoggedIn()}logout(){this.authService.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(o){return new(o||e)(w(v),w(m))}}static{this.\u0275cmp=C({type:e,selectors:[["app-nav-bar"]],standalone:!0,features:[b],decls:13,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","px-4"],["routerLink","/acercade",1,"navbar-brand"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],["class","nav-item",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],[4,"ngIf"],[1,"nav-item"],["id","usersDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false","routerLink","/login","routerLinkActive","active",1,"nav-link"],["id","usersDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false","routerLink","/register","routerLinkActive","active",1,"nav-link"],[1,"nav-item","dropdown"],["id","usersDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false","routerLink","/usuarios",1,"nav-link"],["href","#","id","assignmentsDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","assignmentsDropdown",1,"dropdown-menu"],["class","dropdown-item","routerLink","/subject-create",4,"ngIf"],["class","dropdown-item","routerLink","/asignar-profesor",4,"ngIf"],["class","dropdown-item","routerLink","/asignar-estudiante",4,"ngIf"],["routerLink","/subject-create",1,"dropdown-item"],["routerLink","/asignar-profesor",1,"dropdown-item"],["routerLink","/asignar-estudiante",1,"dropdown-item"],["href","#","id","studentsDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","studentsDropdown",1,"dropdown-menu"],["routerLink","/estudiantes",1,"dropdown-item"],["routerLink","/estudiantes-lista",1,"dropdown-item"],["href","#","id","viewDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","viewDropdown",1,"dropdown-menu"],["routerLink","subject-list",1,"dropdown-item"],["routerLink","estudiantes-lista",1,"dropdown-item"],["id","usersDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false","routerLink","/acercade",1,"nav-link"],[1,"navbar-text","text-white","me-3"],[1,"btn","btn-outline-light",3,"click"]],template:function(o,n){o&1&&(r(0,"nav",0)(1,"a",1),a(2,"Conexi\xF3n Educativa SW"),i(),r(3,"div",2)(4,"ul",3),g(5,Q,3,0,"li",4)(6,X,3,0,"li",4)(7,Y,3,0,"li",5)(8,ne,10,3,"li",5)(9,oe,10,0,"li",5)(10,ie,10,0,"li",5)(11,re,4,0,"div",6),i(),g(12,ae,5,3,"div",6),i()()),o&2&&(s(5),u("ngIf",!n.isLoggedIn()),s(),u("ngIf",!n.isLoggedIn()),s(),u("ngIf",n.isLoggedIn()&&(n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Coordinador"),s(),u("ngIf",n.isLoggedIn()&&(n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Coordinador"),s(),u("ngIf",n.isLoggedIn()&&(n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Coordinador"),s(),u("ngIf",n.isLoggedIn()&&((n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Coordinador"||(n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Profesor"||(n.user==null||n.user.tipoUsuario==null?null:n.user.tipoUsuario.type)==="Padre de Familia")),s(),u("ngIf",n.isLoggedIn()),s(),u("ngIf",n.isLoggedIn()))},dependencies:[U,j,D,V,H],styles:[".navbar[_ngcontent-%COMP%]{background-color:#343a40}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff!important}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#343a40!important;background-color:#fff}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background-color:#343a40}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#fff!important;transition:all .3s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{color:#6c757d!important;background-image:linear-gradient(45deg,#fff,#e0e0e0)}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})}}return e})();var q=(()=>{class e{constructor(t){this.router=t,this.currentTabId=Math.random().toString(36).substr(2,9)}initTabSessionControl(){sessionStorage.setItem("tab-id",this.currentTabId);let t=localStorage.getItem("active-tab-id"),o=t&&t!==this.currentTabId,n=window.location.pathname==="/login",_=!!sessionStorage.getItem("token");o&&!n&&_?(console.warn("Pesta\xF1a duplicada detectada, cerrando sesi\xF3n"),sessionStorage.removeItem("token"),localStorage.removeItem("active-tab-id"),this.router.navigate(["/login"])):(localStorage.setItem("active-tab-id",this.currentTabId),window.addEventListener("beforeunload",()=>{sessionStorage.getItem("tab-id")===localStorage.getItem("active-tab-id")&&localStorage.removeItem("active-tab-id")}))}static{this.\u0275fac=function(o){return new(o||e)(c(m))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var J=(()=>{class e{constructor(){this.tabSession=A(q)}ngOnInit(){this.tabSession.initTabSessionControl()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-root"]],standalone:!0,features:[b],decls:2,vars:0,template:function(o,n){o&1&&x(0,"app-nav-bar")(1,"router-outlet")},dependencies:[D,R,W],encapsulation:2})}}return e})();var l=(()=>{class e{constructor(t,o){this.authService=t,this.router=o}canActivate(t,o){return console.log("Verificando si el usuario est\xE1 logueado..."),this.authService.isLoggedIn()?(console.log("Usuario autenticado. Permitido acceder"),!0):(console.log("Usuario no autenticado. Redirigiendo al login..."),this.router.navigate(["/login"]),!1)}static{this.\u0275fac=function(o){return new(o||e)(c(v),c(m))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var S=(()=>{class e{constructor(t,o){this.authService=t,this.router=o}canActivate(){if(this.authService.isLoggedIn()){let t=this.authService.getUser();return this.router.navigate(["/acercade"]),!1}return!0}static{this.\u0275fac=function(o){return new(o||e)(c(v),c(m))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var K=(()=>{class e{intercept(t,o){let n=sessionStorage.getItem("token");if(n){let _=t.clone({setHeaders:{Authorization:`Bearer ${n}`}});return o.handle(_)}return o.handle(t)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac})}}return e})();var se=[{path:"",loadComponent:()=>import("./chunk-PVEWUCSM.js").then(e=>e.LoginComponent),canActivate:[S]},{path:"login",loadComponent:()=>import("./chunk-PVEWUCSM.js").then(e=>e.LoginComponent),canActivate:[S]},{path:"register",loadComponent:()=>import("./chunk-AK64YFPQ.js").then(e=>e.RegisterComponent),canActivate:[S]},{path:"usuarios",loadComponent:()=>import("./chunk-YZ7KA3VR.js").then(e=>e.UsuariosComponent),canActivate:[l]},{path:"asignatura",loadComponent:()=>import("./chunk-XE7KWYVL.js").then(e=>e.AsignaturasComponent),canActivate:[l]},{path:"estudiantes",loadComponent:()=>import("./chunk-AJJ4XGS2.js").then(e=>e.EstudiantesComponent),canActivate:[l]},{path:"estudiantes-lista",loadComponent:()=>import("./chunk-XUXRYM3H.js").then(e=>e.EstudiantesListaComponent),canActivate:[l]},{path:"subject-list",loadComponent:()=>import("./chunk-HE5J5F2W.js").then(e=>e.SubjectListComponent),canActivate:[l]},{path:"subject-detail/:id",loadComponent:()=>import("./chunk-ZZWK3PHY.js").then(e=>e.SubjectDetailComponent),canActivate:[l]},{path:"subject-create",loadComponent:()=>import("./chunk-56ZQND2D.js").then(e=>e.SubjectCreateComponent),canActivate:[l]},{path:"subject-update/:id",loadComponent:()=>import("./chunk-GYHWCIFG.js").then(e=>e.SubjectUpdateComponent),canActivate:[l]},{path:"asignar-profesor",loadComponent:()=>import("./chunk-IFKQA23D.js").then(e=>e.AsignarProfesorComponent),canActivate:[l]},{path:"asignar-estudiante",loadComponent:()=>import("./chunk-5OMZDM7U.js").then(e=>e.AsignarEstudianteComponent),canActivate:[l]},{path:"asignar-estudiantes/:id",loadComponent:()=>import("./chunk-ZYBLDFHZ.js").then(e=>e.AsignarEstudiantesComponent),canActivate:[l]},{path:"acercade",loadComponent:()=>import("./chunk-7AVNAIZ3.js").then(e=>e.AcercadeComponent),canActivate:[l]},{path:"**",redirectTo:"/acercade",pathMatch:"full"}];B(J,{providers:[G(se),O(N()),{provide:F,useClass:K,multi:!0},y($)]});

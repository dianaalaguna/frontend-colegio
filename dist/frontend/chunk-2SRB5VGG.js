import{d as m}from"./chunk-A7GR7GC6.js";import{a as u,f as l}from"./chunk-K7YZQKDG.js";import{L as n,O as a,T as r,j as i}from"./chunk-ZTNMYY3J.js";var d=(()=>{class s{constructor(t,e){this.http=t,this.router=e,this.baseUrl=`${l.apiUrl}/auth`,this.userSubject=new i(this.getUserFromSession()),this.user$=this.userSubject.asObservable()}login(t){return console.log("Ruta: ",this.baseUrl),this.http.post(`${this.baseUrl}/login`,t).pipe(n(e=>{sessionStorage.setItem("token",e.token);let o={id:e.user.id,username:e.user.username,nombres:e.user.nombres,apellidos:e.user.apellidos,estado:e.user.estado,tipoUsuario:e.user.tipoUsuario};sessionStorage.setItem("user",JSON.stringify(o)),this.userSubject.next(o),alert("Sesi\xF3n Iniciada correctamente!")}))}register(t){return this.http.post(`${this.baseUrl}/register`,t)}logout(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("tab-id"),localStorage.removeItem("active-tab-id"),this.userSubject.next(null),this.router.navigate(["/login"])}isLoggedIn(){return!!sessionStorage.getItem("token")}getUser(){return this.userSubject.getValue()}getUserFromSession(){let t=sessionStorage.getItem("user");return t?JSON.parse(t):null}static{this.\u0275fac=function(e){return new(e||s)(r(u),r(m))}}static{this.\u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{d as a};

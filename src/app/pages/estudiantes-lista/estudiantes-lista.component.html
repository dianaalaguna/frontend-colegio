<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ðŸ‘¥ Lista de Estudiantes</h2>

    <div class="input-group" style="width: 300px;">
      <input type="email" [(ngModel)]="busquedaEmailTutor" class="form-control" placeholder="Buscar por email">
      <button class="btn btn-primary" (click)="buscarEstudiante()">Buscar</button>
      <button class="btn btn-secondary" *ngIf="busquedaEmailTutor" (click)="resetBusqueda()">Limpiar</button>
    </div>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>CÃ³digo</th>
        <th>Nombres</th>
        <th>Apellidos</th>
        <th>E-Mail tutor</th>
        <th>CumpleaÃ±os</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of estudiantes">
        <td>
          <input class="form-control" [(ngModel)]="editCache[student.codigoEstudiante].codigoEstudiante" readonly>
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[student.codigoEstudiante].nombres" (input)="onChange(student.codigoEstudiante, 'nombres', editCache[student.codigoEstudiante].nombres)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[student.codigoEstudiante].apellidos" (input)="onChange(student.codigoEstudiante, 'apellidos', editCache[student.codigoEstudiante].apellidos)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[student.codigoEstudiante].correoTutor" (input)="onChange(student.codigoEstudiante, 'correoTutor', editCache[student.codigoEstudiante].correoTutor)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[student.codigoEstudiante].nacimiento" readonly>
        </td>
        <td>
          <button class="btn btn-success btn-sm me-2" [disabled]="!hasChanges(student.codigoEstudiante)" (click)="saveChanges(student.codigoEstudiante)">Guardar</button>
          <button class="btn btn-danger btn-sm" (click)="deleteUser(student.codigoEstudiante)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="estudiantes.length === 0" class="alert alert-warning text-center">
    No se encontraron estudiantes.
  </div>
</div>

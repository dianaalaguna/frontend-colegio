<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ðŸ‘¥ Lista de Usuarios</h2>

    <div class="input-group" style="width: 300px;">
      <input type="email" [(ngModel)]="busquedaUsername" class="form-control" placeholder="Buscar por email">
      <button class="btn btn-primary" (click)="buscarUsuario()">Buscar</button>
      <button class="btn btn-secondary" *ngIf="busquedaUsername" (click)="resetBusqueda()">Limpiar</button>
    </div>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Nombres</th>
        <th>Apellidos</th>
        <th>TelÃ©fono</th>
        <th>E-Mail</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of usuarios">
        <td>
          <input class="form-control" [(ngModel)]="editCache[user.username].nombres" (input)="onChange(user.username, 'nombres', editCache[user.username].nombres)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[user.username].apellidos" (input)="onChange(user.username, 'apellidos', editCache[user.username].apellidos)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[user.username].telefono" (input)="onChange(user.username, 'telefono', editCache[user.username].telefono)">
        </td>
        <td>
          <input class="form-control" [(ngModel)]="editCache[user.username].username" readonly>
        </td>
        <td>
          <button class="btn btn-success btn-sm me-2" [disabled]="!hasChanges(user.username)" (click)="saveChanges(user.username)">Guardar</button>
          <button class="btn btn-danger btn-sm" (click)="deleteUser(user.username)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="usuarios.length === 0" class="alert alert-warning text-center">
    No se encontraron usuarios.
  </div>
</div>
